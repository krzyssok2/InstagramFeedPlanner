<div class="feed-selector">
    <button class="feed-selector-button" @onclick="() => OnAddNewFeed.InvokeAsync()">Add new Feed</button>

    <div class="feed-list">
        @foreach (var feed in Feeds)
        {
            <div class="feed-option @(SelectedFeedId == feed.Id ? "selected" : "")"
                 @onclick="() => OnFeedSelected.InvokeAsync(feed.Id)">

                @if (RenamingFeedId == feed.Id)
                {
                    <div class="rename-container">
                        <input type="text"
                               class="rename-input"
                               maxlength="15"
                               @bind="RenameText"
                               @bind:event="oninput"
                               @ref="renameInputRef"
                               @onkeydown="(e) => OnRenameKeyDown(e, feed.Id)"
                               @onclick:stopPropagation />

                        <button class="rename-confirm-btn" @onclick="() => ConfirmRename(feed.Id)">
                            <CheckIcon />
                        </button>
                    </div>
                }
                else
                {
                    <div class="feed-content">
                        <span class="feed-name" title="@feed.Name">@feed.Name</span>
                        <div class="feed-option-actions">
                            <button class="rename-feed-btn"
                                    @onclick="(e) => StartRename(feed.Id, feed.Name)"
                                    @onclick:stopPropagation
                                    title="Rename feed">
                                <PenIcon />
                            </button>
                            <button class="delete-feed-btn"
                                    @onclick="(e) => OnDeleteFeed.InvokeAsync(feed.Id)"
                                    @onclick:stopPropagation
                                    title="Delete feed">
                                <XIcon StrokeThickness="4" />
                            </button>
                        </div>
                    </div>
                }
            </div>
        }
    </div>
</div>

